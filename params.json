{"name":"modern.ie Selenium","tagline":"Manage modern.ie VBox-VMs with Selenium-Support","body":"modernie_selenium\r\n=================\r\n\r\nManage modern.ie VirtualBox-Appliances with Selenium-Support\r\n\r\nThis script allows to delete and create virtual Windows-Machines using Images from http://www.modern.ie for automating Browser-Testing with Selenium.\r\n\r\nAs the modern.ie-Machines refuses to run more than 30-90 Days (at least for more than an hour) we remove the machines on a regular basis and recreate the original Appliance with all changes needed to run Selenium.\r\n\r\nPrerequisites\r\n=================\r\n\r\n  * modern.ie VBox-Appliances\r\n  * VirtualBox (tested with 4.3)\r\n  * VirtualBox Extension Pack\r\n  * Selenium-Hub\r\n  * deuac.iso\r\n  * IEDriverServer (for Selenium)\r\n  * chromedriver (for Selenium)\r\n  * Java JRE (for Selenium)\r\n  * Selenium Standalone Server\r\n  * Optional: phpVirtualBox\r\n   \r\nWhat it does\r\n=================\r\n\r\n  * Import modern.ie Appliances to VirtualBox\r\n  * Configure VM Network-Settings\r\n  * Configure VM RDP-Port-Setting (VRDE)\r\n  * Configure VM Clipboard behaviour\r\n  * Disable UAC\r\n  * Disable Windows-Firewall\r\n  * Rename the VM (Hostname)\r\n  * Configures IE Protected-Mode to work with Selenium\r\n  * Disables IE Cache\r\n  * Install Java\r\n  * Install Firefox\r\n  * Install Chrome\r\n  * Install Selenium\r\n  * Reports via E-Mail\r\n\r\nWhat it not does\r\n=================\r\n\r\n  * Download modern.ie Appliances\r\n  * Set up VirtualBox (if you use SaltStack check out: https://gist.github.com/gpkvt/b276223ad5c923023aaa)\r\n  * Set up phpVirtualBox (again, if you use SaltStack: https://gist.github.com/gpkvt/a8785032c0aa3d920ab9)\r\n   \r\nGetting started\r\n=================\r\n\r\n  * Download the Appliance(s) you want to use from http://www.modern.ie/ and put the extracted OVA-Files on your Server. \r\n  * Clone this repository.\r\n  * Get the Windows Java (JRE) Installer and Selenium Server Standalone (JAR) and put them beside the OVA-Files (or somewhere else).\r\n  * Get deuac.iso (https://github.com/tka/SeleniumBox/blob/master/deuac.iso).\r\n  * Get IEDriverServer.exe (https://code.google.com/p/selenium/wiki/InternetExplorerDriver) and put it in ```./Tools/selenium_conf/```.\r\n  * Get chromedriver.exe (https://code.google.com/p/selenium/wiki/ChromeDriver) and put it in ```./Tools/selenium_conf/```.\r\n  * Get Chrome and Firefox, place both in ```./Tools/```.\r\n  * Edit the Selenium Config-Files (```./Tools/Selenium_conf/*/config.json```).\r\n  * Edit the Config-Section in mkvm.sh so it fits your needs (see below for details).\r\n  * Run ```mkvm.sh /path/to/your/appliance/foobar.ova```.\r\n\r\nConfigure\r\n================\r\n\r\nBy default the Script assumes that your VirtualBox-Machines are placed in ```/srv/VMs/``` and that the script is run by the User ```vbox```. All supplemental files should be placed in ```/opt/Tools/``` but you can configure different paths.\r\n\r\nTo do so simply edit ```mkvm.sh```:\r\n\r\n```\r\njava_exe=\"jre-7u55-windows-i586.exe\"\r\n```\r\n\r\nFilename of your Java-Installer.\r\n\r\n```\r\nselenium_jar=\"selenium-server-standalone-2.41.0.jar\"\r\n```\r\n\r\nFilename of your Selenium-Server.\r\n\r\n```\r\nnic_bridge=\"eth2\"\r\n```\r\n\r\nName of your Network-Interface to use as bridge for your VM.\r\n\r\n```\r\nvm_path=\"/srv/VMs/\"\r\n```\r\n\r\nPath where to put your VMs.\r\n\r\n```\r\nvm_mem=\"768\"\r\n```\r\n\r\nAmount of memory (RAM) for Windows Vista, 7 and 8.x VMs in MB.\r\n\r\n```\r\nvm_mem_xp=\"512\"\r\n```\r\n\r\nAmount of memory (RAM) for Windows XP VMs in MB.\r\n\r\n```\r\ndeuac_iso=\"/opt/Tools/deuac.iso\"\r\n```\r\n\r\nPath and filename for deuac.iso (a bootable CD-Image to disable UAC so we can install Java without Problems).\r\n\r\n```\r\ntools_path=\"/opt/Tools/\"\r\n```\r\n\r\nPath to ```java_exe```, ```firefox_exe``` and ```chrome_exe``` (Location of Installers on VM-Host).\r\n\r\n```\r\nselenium_path=\"/opt/Tools/selenium_conf/\"\r\n```\r\n\r\nPath to your Selenium-Config-Files. It's important that you keep the folder structure below this point, otherwise the config will not be copied to the VMs (or the wrong Config goes to the wrong Machines).\r\n\r\n```\r\nie_cache_reg=\"/opt/Tools/ie_disablecache.reg\"\r\n```\r\n\r\nPath and filename to ```ie_disablecache.reg``` (Disables Internet Explorer Cache).\r\n\r\n```\r\nie_protectedmode_reg=\"/opt/Tools/ie_protectedmode.reg\"\r\n```\r\n\r\nPath and filename to ```ie_protectedmode.reg``` (Enables Protected Mode for all IE Security Zones). \r\n\r\n```\r\nlog_path=\"/home/vbox/\"\r\n```\r\n\r\nPath to the (temporary) Logfile.\r\n\r\n```\r\nvbox_user=\"vbox\"\r\n```\r\n\r\nUsername of VirtualBox-User.\r\n\r\n```\r\nmailto=\"root@example.com\"\r\n```\r\n\r\nE-Mail-Adress to send logfile to.\r\n\r\n```\r\ncreate_snapshot=False\r\n```\r\n\r\nIf ```True``` a snapshot will be created after all changes have been made.\r\n\r\nUsage\r\n=====\r\n\r\nTo import the IE6-WinXP Appliance simply run:\r\n\r\n```\r\nsu vbox --shell=/bin/bash -c \"/opt/mkvm.sh /opt/Appliances/xp/ie6/IE6\\ -\\ WinXP.ova\"\r\n```\r\n\r\nIf you already have an IE6-WinXP-Instance - and want to recreate it - run:\r\n\r\n```\r\nsu vbox --shell=/bin/bash -c \"/opt/mkvm.sh /opt/Appliances/xp/ie6/IE6\\ -\\ WinXP.ova\" --delete \"IE6 - WinXP\"\r\n```\r\n\r\nWe recommend to use a CronJob to recreate the VMs on a regular basis. See ```mkvm_cronjob```. To avoid too much load on the Host we use a Wrapper-Script ```mkvm_cron.sh``` so that only one Appliance gets imported after another.\r\n\r\nKnown Problems\r\n==============\r\n\r\nXP-Machines doesn't set their new hostname automatically. You can use ```C:\\Temp\\rename.bat``` to set the correct name. Restart the VM afterwards. This is only needed if you run more than one instance of the same Appliance.\r\n\r\nAcknowledgements\r\n================\r\n\r\n  * deuac.iso comes from https://github.com/tka/SeleniumBox\r\n  * Inspired by https://github.com/xdissent/ievms\r\n  * http://modern.ie is a Service offered by Microsoft, so thanks for that.\r\n  * Thanks to @dsuckau for the Selenium-Config Part\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}